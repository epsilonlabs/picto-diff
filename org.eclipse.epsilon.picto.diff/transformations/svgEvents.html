<!-- html fragment appended to the end of the DotDiffEngine comparison result -->
<script type="text/javascript">

    window.addEventListener('load', function () {
        var SVGDoc = document.getElementsByTagName("svg")[0];
        SVGDoc.setAttribute("onmouseover", "mouseOver(evt)");
        SVGDoc.setAttribute("onmouseout", "mouseOut(evt)");
    });

    var selectionColor = "orange";
    // change the stroke of polygons except transparent ones
    var transparentColor = "transparent";
    var diffPrefix = "_";

    function mouseOver(evt) {
        var element = evt.target;
        var parent = element.parentNode;
        if (parent.getAttribute("class") == "node") {
            var children = parent.childNodes;
            var title = '';
            for (var i = 0; i < children.length; i++) {
                if (children[i] instanceof SVGTitleElement) {
                    title = children[i].childNodes[0].nodeValue;
                }
                if (children[i] instanceof SVGPolygonElement) {
                    if (children[i].getAttribute("stroke") != transparentColor) {
                        children[i].setAttribute("stroke", selectionColor);
                    }
                }
            }
            var nodes = document.getElementsByClassName("node");
            var index = -1;
            for (var i = 0; i < nodes.length && index != i; i++) {
                for (var j = 0; j < nodes[i].childNodes.length; j++) {
                    if (nodes[i].childNodes[j] instanceof SVGTitleElement) {
                        var otherTitle = nodes[i].childNodes[j].childNodes[0].nodeValue;
                        if (title == (diffPrefix + otherTitle)) {
                            index = i;
                        }
                        else if ((diffPrefix + title) == otherTitle) {
                            index = i;
                        }
                    }
                    if (nodes[i].childNodes[j] instanceof SVGPolygonElement) {
                        if (index == i) {
                            if (nodes[i].childNodes[j].getAttribute("stroke") != transparentColor) {
                                nodes[i].childNodes[j].setAttribute("stroke", selectionColor);
                            }
                        }
                    }
                }
            }
        }
    }

    function mouseOut(evt) {
        var element = evt.target;
        var parent = element.parentNode;
        if (parent.getAttribute("class") == "node") {
            var children = parent.childNodes;
            var title = '';
            for (var i = 0; i < children.length; i++) {
                if (children[i] instanceof SVGTitleElement) {
                    title = children[i].childNodes[0].nodeValue;
                }
                if (children[i] instanceof SVGPolygonElement) {
                    if (children[i].getAttribute("stroke") != transparentColor) {
                        children[i].setAttribute("stroke", "black");
                    }
                }
            }
            var nodes = document.getElementsByClassName("node");
            var index = -1;
            for (var i = 0; i < nodes.length && index != i; i++) {
                for (var j = 0; j < nodes[i].childNodes.length; j++) {
                    if (nodes[i].childNodes[j] instanceof SVGTitleElement) {
                        var otherTitle = nodes[i].childNodes[j].childNodes[0].nodeValue;
                        if (title == (diffPrefix + otherTitle)) {
                            index = i;
                        } else if ((diffPrefix + title) == otherTitle) {
                            index = i;
                        }
                    }
                    if (nodes[i].childNodes[j] instanceof SVGPolygonElement) {
                        if (index == i) {
                            if (nodes[i].childNodes[j].getAttribute("stroke") != transparentColor) {
                                nodes[i].childNodes[j].setAttribute("stroke", "black");
                            }
                        }
                    }
                }
            }
        }
    }
</script>
